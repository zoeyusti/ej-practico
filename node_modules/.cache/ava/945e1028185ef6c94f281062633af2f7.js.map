{"version":3,"sources":["service.test.js"],"names":["service","require","fs","path","t","is","usuariosEj","nombre","apellido","telefono","email","id","usuarios","cargarUsuarios","usuarios2","readFile","err","data","reject","resolve","split","filter","string","map","JSON","parse","console","log","otroUsuario","agregarUsuarios","appendFile","stringify"],"mappings":";;AACA;;;;;;AAEA,MAAMA,UAAUC,QAAQ,yBAAR,CAAhB,C,CAHA;;AAIA,IAAIC,KAAKD,QAAQ,IAAR,CAAT;AACA,MAAME,OAAO,aAAb;;AAEA,mBAAK,qBAAL,EAA4BC,KAAK;AAC/BA,GAAEC,EAAF,CAAK,IAAI,CAAT,EAAY,CAAZ;AACD,CAFD;;AAIA,IAAIC,aAAa,CAChB,EAACC,QAAQ,QAAT,EAAmBC,UAAU,OAA7B,EAAsCC,UAAS,KAA/C,EAAsDC,OAAO,kBAA7D,EAAiFC,IAAI,gBAArF,EADgB,EAEhB,EAACJ,QAAO,SAAR,EAAmBC,UAAU,QAA7B,EAAuCC,UAAS,KAAhD,EAAuDC,OAAO,mBAA9D,EAAmFC,IAAI,kBAAvF,EAFgB,CAAjB;;AAKA,mBAAK,eAAL,EAAsB,MAAMP,CAAN,IAAS;AAC9B,KAAIQ,WAAW,MAAMZ,QAAQa,cAAR,EAArB;AACA,KAAIC,YAAaZ,GAAGa,QAAH,CAAY,aAAZ,EAA2B,OAA3B,EAAoC,UAASC,GAAT,EAAcC,IAAd,EAAoB;AAClE,MAAGD,GAAH,EAAQ;AACP,UAAOE,OAAOF,GAAP,CAAP;AACA,GAFD,MAEK;AACL;AACAG,WAAQF,KAAKG,KAAL,CAAW,IAAX,EAAiBC,MAAjB,CAAwBC,UAAUA,MAAlC,EAA0CC,GAA1C,CAA8CC,KAAKC,KAAnD,CAAR;AACA;AACH,EAPa,CAAjB;AAQArB,GAAEC,EAAF,CAAKO,QAAL,EAAeE,SAAf;AACAY,SAAQC,GAAR,CAAY,QAAZ;AACAD,SAAQC,GAAR,CAAYf,QAAZ;AACA,CAbD;;AAeA;;;;;;;;;AASA,mBAAK,gBAAL,EAAuB,MAAMR,CAAN,IAAS;AAC/B,KAAIwB,cAAc,EAACrB,QAAQ,QAAT,EAAmBC,UAAU,OAA7B,EAAsCC,UAAS,KAA/C,EAAsDC,OAAO,oBAA7D,EAAmFC,IAAI,gBAAvF,EAAlB;AACA;AACA,KAAIC,WAAW,MAAMZ,QAAQ6B,eAAR,CAAwBD,WAAxB,CAArB;AACA,KAAId,YAAYZ,GAAG4B,UAAH,CAAc,aAAd,EAA6BN,KAAKO,SAAL,CAAeH,WAAf,IAA6B,IAA1D,EAAgE,UAASZ,GAAT,EAAa;AAC5F,MAAIA,GAAJ,EAAQ;AACPU,WAAQC,GAAR,CAAYX,GAAZ;AACA;AACD,EAJe,CAAhB;AAKAZ,GAAEC,EAAF,CAAKO,QAAL,EAAeE,SAAf;AACAY,SAAQC,GAAR,CAAY,SAAZ;AACAD,SAAQC,GAAR,CAAYf,QAAZ;AACA,CAZD;AAaA","file":"service.test.js","sourcesContent":["// test.js\nimport test from 'ava';\n\nconst service = require('../services/listService');\nvar fs = require('fs');\nconst path = 'datosEj.txt';\n\ntest('one plus one is two', t => {\n  t.is(1 + 1, 2)\n})\n\nvar usuariosEj = [\n\t{nombre: 'fulano', apellido: 'detal', telefono:'123', email: 'fulano@detal.com', id: 'fulanodetal123'},\n\t{nombre:'mengano', apellido: 'quetal', telefono:'456', email: 'mengano@gmail.com', id: 'menganoquetal456'}\n]\n\ntest('prueba cargar', async t=>{\n\tvar usuarios = await service.cargarUsuarios();\n\tvar usuarios2 =  fs.readFile('datosEj.txt', 'utf-8', function(err, data) {\n        if(err) {\n        \treturn reject(err);\n        }else{\n        //console.log(\"promise service data\"+data);\n        resolve(data.split(\"\\n\").filter(string => string).map(JSON.parse));\n       }\n    });\n\tt.is(usuarios, usuarios2);\n\tconsole.log(\"cargar\");\n\tconsole.log(usuarios);\n})\n\n/*test('prueba agregar', function(){\n\tvar otroUsuario = {nombre: 'sutano', apellido: 'nuevo', telefono:'789', email: 'sutano@hotmail.com', id: 'sutanonuevo789'};\n\tfs.appendFile('datosEj.txt', JSON.stringify(otroUsuario) +'\\n', function(err){\n\t\tif (err){\n\t\t\tconsole.log(err);\n\t\t}\n\t});\n})*/\n\ntest('prueba agregar', async t=>{\n\tvar otroUsuario = {nombre: 'sutano', apellido: 'nuevo', telefono:'789', email: 'sutano@hotmail.com', id: 'sutanonuevo789'};\n\t//await service.agregarUsuarios(otroUsuario);\n\tvar usuarios = await service.agregarUsuarios(otroUsuario);\n\tvar usuarios2 = fs.appendFile('datosEj.txt', JSON.stringify(otroUsuario) +'\\n', function(err){\n\t\tif (err){\n\t\t\tconsole.log(err);\n\t\t}\n\t});\n\tt.is(usuarios, usuarios2);\n\tconsole.log(\"agregar\");\n\tconsole.log(usuarios);\n})\n/*\nservice.agregarUsuarios = function(datos){\n\tfs.appendFile('datos.txt', JSON.stringify(datos) +'\\n', function(err){\n\t\tif (err){\n\t\t\tconsole.log(err);\n\t\t}\n\t});\n}\n*/"]}